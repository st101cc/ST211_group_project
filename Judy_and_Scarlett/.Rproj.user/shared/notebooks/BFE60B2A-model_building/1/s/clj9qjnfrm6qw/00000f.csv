"0","merged_data <- data  # create a copy for modifications"
"0",""
"0","merged_data <- merged_data %>%"
"0","  mutate("
"0","    #W1hous12HH, merge levels 4 and 5"
"0","    W1hous12HH = as.character(W1hous12HH),  # convert to character to avoid issues with factor levels"
"0","    W1hous12HH = if_else(W1hous12HH %in% c(""4"", ""5""), ""4_5"", W1hous12HH),"
"0","    "
"0","    # W1hiqualmum, merge several groups of levels"
"0","    W1hiqualmum = as.character(W1hiqualmum),"
"0","    W1hiqualmum = case_when("
"0","      W1hiqualmum %in% c(""3"", ""4"") ~ ""3_4"","
"0","      W1hiqualmum %in% c(""5"", ""6"", ""7"") ~ ""5_6_7"","
"0","      W1hiqualmum %in% c(""8"", ""9"") ~ ""8_9"","
"0","      W1hiqualmum %in% c(""12"", ""13"", ""14"") ~ ""12_13_14"","
"0","      TRUE ~ as.character(W1hiqualmum)"
"0","    ),"
"0","    "
"0","    # for W1marstatmum, merge levels 4, 5 and 6"
"0","    W1marstatmum = as.character(W1marstatmum),"
"0","    W1marstatmum = if_else(W1marstatmum %in% c(""4"", ""5"", ""6""), ""4_5_6"", W1marstatmum)"
"0","  ) %>%"
"0","  mutate("
"0","    # convert back to factors with new levels"
"0","    W1hous12HH = factor(W1hous12HH),"
"0","    W1hiqualmum = factor(W1hiqualmum),"
"0","    W1marstatmum = factor(W1marstatmum)"
"0","  )"
"0",""
"0","# dropping unused factor levels"
"0","data <- data %>%"
"0","  mutate("
"0","    W1hous12HH = droplevels(W1hous12HH),"
"0","    W1hiqualmum = droplevels(W1hiqualmum),"
"0","    W1marstatmum = droplevels(W1marstatmum)"
"0","  )"
"0",""
"0",""
"0","#summary(merged_data)"
